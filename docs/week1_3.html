<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Describing Data Numerically – PSYC559: Applied Machine Learning in Psychology</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-2fef5ea3f8957b3e4ecc936fc74692ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-121a38a6e2c75e451ef209d5f681333d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./1_1.html">Introduction to R</a></li><li class="breadcrumb-item"><a href="./week1_3.html">Describing Data Numerically</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">PSYC559: Applied Machine Learning in Psychology</a> 
    </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.qmd" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Table of Contents</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Introduction to R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Basic R Programming</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_1b.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reading in Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week1_3.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Describing Data Numerically</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week1_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Describing Data Visually</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Introduction to Machine Learning</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Important Terms and Distinctions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Problem Classes in ML</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Splitting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bias and Variance</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Feature Engineering</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2_5a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2_5b.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Example Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2_5c.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Missing Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2_5d.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Feature Filtering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2_5e.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Numeric Feature Engineering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2_5f.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Categorical Feature Engineering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2_5g.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workflow</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Linear Regression</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week3_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Simple Linear Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week3_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multiple Linear Regression</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#numerical-summaries-of-data-frames" id="toc-numerical-summaries-of-data-frames" class="nav-link active" data-scroll-target="#numerical-summaries-of-data-frames">Numerical Summaries of Data Frames</a></li>
  <li><a href="#read-in-marketing-data" id="toc-read-in-marketing-data" class="nav-link" data-scroll-target="#read-in-marketing-data">Read in Marketing Data</a></li>
  <li><a href="#install-and-load-psych-package" id="toc-install-and-load-psych-package" class="nav-link" data-scroll-target="#install-and-load-psych-package">Install and Load <code>psych</code> Package</a></li>
  <li><a href="#describe-the-data" id="toc-describe-the-data" class="nav-link" data-scroll-target="#describe-the-data">Describe the Data</a></li>
  <li><a href="#describe-the-data-by-group" id="toc-describe-the-data-by-group" class="nav-link" data-scroll-target="#describe-the-data-by-group">Describe the Data by Group</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./1_1.html">Introduction to R</a></li><li class="breadcrumb-item"><a href="./week1_3.html">Describing Data Numerically</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Describing Data Numerically</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="numerical-summaries-of-data-frames" class="level2" style="color: yellow">
<h2 class="anchored" data-anchor-id="numerical-summaries-of-data-frames">Numerical Summaries of Data Frames</h2>
</section>
<p>Once you have read in a data frame it can be useful to know how the variables are understood by R. For example, let’s look at some <a href="https://www.kaggle.com/datasets/jackdaoud/marketing-data" class="uri">Kaggle Marketing Analytics Data</a>. You can download the raw data <a href="https://github.com/nailson/ifood-data-business-analyst-test">here</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/dictionary.png" class="img-fluid figure-img"></p>
<figcaption>Data dictionary for marketing data</figcaption>
</figure>
</div>
<section id="read-in-marketing-data" class="level3">
<h3 class="anchored" data-anchor-id="read-in-marketing-data">Read in Marketing Data</h3>
<p>Let’s read in the data using the <code>read.csv()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"/Users/zacharyfisher/Dropbox/Macbook/UNC/Teaching/Courses/PSYC559/PSYC559-Site/data"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"ifood_df.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="install-and-load-psych-package" class="level3">
<h3 class="anchored" data-anchor-id="install-and-load-psych-package">Install and Load <code>psych</code> Package</h3>
<p>Once we know the data has been read into R we can look at how R understands the data file using the structure function <code>str()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   2205 obs. of  39 variables:
 $ Income              : num  58138 46344 71613 26646 58293 ...
 $ Kidhome             : int  0 1 0 1 1 0 0 1 1 1 ...
 $ Teenhome            : int  0 1 0 0 0 1 1 0 0 1 ...
 $ Recency             : int  58 38 26 26 94 16 34 32 19 68 ...
 $ MntWines            : int  635 11 426 11 173 520 235 76 14 28 ...
 $ MntFruits           : int  88 1 49 4 43 42 65 10 0 0 ...
 $ MntMeatProducts     : int  546 6 127 20 118 98 164 56 24 6 ...
 $ MntFishProducts     : int  172 2 111 10 46 0 50 3 3 1 ...
 $ MntSweetProducts    : int  88 1 21 3 27 42 49 1 3 1 ...
 $ MntGoldProds        : int  88 6 42 5 15 14 27 23 2 13 ...
 $ NumDealsPurchases   : int  3 2 1 2 5 2 4 2 1 1 ...
 $ NumWebPurchases     : int  8 1 8 2 5 6 7 4 3 1 ...
 $ NumCatalogPurchases : int  10 1 2 0 3 4 3 0 0 0 ...
 $ NumStorePurchases   : int  4 2 10 4 6 10 7 4 2 0 ...
 $ NumWebVisitsMonth   : int  7 5 4 6 5 6 6 8 9 20 ...
 $ AcceptedCmp3        : int  0 0 0 0 0 0 0 0 0 1 ...
 $ AcceptedCmp4        : int  0 0 0 0 0 0 0 0 0 0 ...
 $ AcceptedCmp5        : int  0 0 0 0 0 0 0 0 0 0 ...
 $ AcceptedCmp1        : int  0 0 0 0 0 0 0 0 0 0 ...
 $ AcceptedCmp2        : int  0 0 0 0 0 0 0 0 0 0 ...
 $ Complain            : int  0 0 0 0 0 0 0 0 0 0 ...
 $ Z_CostContact       : int  3 3 3 3 3 3 3 3 3 3 ...
 $ Z_Revenue           : int  11 11 11 11 11 11 11 11 11 11 ...
 $ Response            : int  1 0 0 0 0 0 0 0 1 0 ...
 $ Age                 : int  63 66 55 36 39 53 49 35 46 70 ...
 $ Customer_Days       : int  2822 2272 2471 2298 2320 2452 2752 2576 2547 2267 ...
 $ marital_Divorced    : int  0 0 0 0 0 0 1 0 0 0 ...
 $ marital_Married     : int  0 0 0 0 1 0 0 1 0 0 ...
 $ marital_Single      : int  1 1 0 0 0 0 0 0 0 0 ...
 $ marital_Together    : int  0 0 1 1 0 1 0 0 1 1 ...
 $ marital_Widow       : int  0 0 0 0 0 0 0 0 0 0 ...
 $ education_2n.Cycle  : int  0 0 0 0 0 0 0 0 0 0 ...
 $ education_Basic     : int  0 0 0 0 0 0 0 0 0 0 ...
 $ education_Graduation: int  1 1 1 1 0 0 1 0 0 0 ...
 $ education_Master    : int  0 0 0 0 0 1 0 0 0 0 ...
 $ education_PhD       : int  0 0 0 0 1 0 0 1 1 1 ...
 $ MntTotal            : int  1529 21 734 48 407 702 563 146 44 36 ...
 $ MntRegularProds     : int  1441 15 692 43 392 688 536 123 42 23 ...
 $ AcceptedCmpOverall  : int  0 0 0 0 0 0 0 0 0 1 ...</code></pre>
</div>
</div>
<p>The <code>psych</code> package in R provides some useful function for describing data. Let’s install <code>psyc</code>, load the package, and look at our data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"psych"</span>) <span class="co"># install the package</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"psych"</span>) <span class="co"># load the library</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="describe-the-data" class="level3">
<h3 class="anchored" data-anchor-id="describe-the-data">Describe the Data</h3>
<p>Now let’s use the <code>describe()</code> function from <code>psych</code> to look at our marketing data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(df) <span class="co"># describe our marketing data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     vars    n     mean       sd median  trimmed      mad  min
Income                  1 2205 51622.09 20713.06  51287 51625.17 24408.04 1730
Kidhome                 2 2205     0.44     0.54      0     0.40     0.00    0
Teenhome                3 2205     0.51     0.54      0     0.48     0.00    0
Recency                 4 2205    49.01    28.93     49    49.00    37.06    0
MntWines                5 2205   306.16   337.49    178   251.45   249.08    0
MntFruits               6 2205    26.40    39.78      8    17.12    11.86    0
MntMeatProducts         7 2205   165.31   217.78     68   119.54    88.96    0
MntFishProducts         8 2205    37.76    54.82     12    25.31    17.79    0
MntSweetProducts        9 2205    27.13    41.13      8    17.48    11.86    0
MntGoldProds           10 2205    44.06    51.74     25    33.57    28.17    0
NumDealsPurchases      11 2205     2.32     1.89      2     1.97     1.48    0
NumWebPurchases        12 2205     4.10     2.74      4     3.83     2.97    0
NumCatalogPurchases    13 2205     2.65     2.80      2     2.22     2.97    0
NumStorePurchases      14 2205     5.82     3.24      5     5.52     2.97    0
NumWebVisitsMonth      15 2205     5.34     2.41      6     5.41     2.97    0
AcceptedCmp3           16 2205     0.07     0.26      0     0.00     0.00    0
AcceptedCmp4           17 2205     0.07     0.26      0     0.00     0.00    0
AcceptedCmp5           18 2205     0.07     0.26      0     0.00     0.00    0
AcceptedCmp1           19 2205     0.06     0.25      0     0.00     0.00    0
AcceptedCmp2           20 2205     0.01     0.12      0     0.00     0.00    0
Complain               21 2205     0.01     0.09      0     0.00     0.00    0
Z_CostContact          22 2205     3.00     0.00      3     3.00     0.00    3
Z_Revenue              23 2205    11.00     0.00     11    11.00     0.00   11
Response               24 2205     0.15     0.36      0     0.06     0.00    0
Age                    25 2205    51.10    11.71     50    51.04    13.34   24
Customer_Days          26 2205  2512.72   202.56   2515  2513.15   259.46 2159
marital_Divorced       27 2205     0.10     0.31      0     0.01     0.00    0
marital_Married        28 2205     0.39     0.49      0     0.36     0.00    0
marital_Single         29 2205     0.22     0.41      0     0.15     0.00    0
marital_Together       30 2205     0.26     0.44      0     0.20     0.00    0
marital_Widow          31 2205     0.03     0.18      0     0.00     0.00    0
education_2n.Cycle     32 2205     0.09     0.29      0     0.00     0.00    0
education_Basic        33 2205     0.02     0.15      0     0.00     0.00    0
education_Graduation   34 2205     0.50     0.50      1     0.51     0.00    0
education_Master       35 2205     0.17     0.37      0     0.08     0.00    0
education_PhD          36 2205     0.22     0.41      0     0.15     0.00    0
MntTotal               37 2205   562.76   575.94    343   482.34   459.61    4
MntRegularProds        38 2205   518.71   553.85    288   436.84   400.30 -283
AcceptedCmpOverall     39 2205     0.30     0.68      0     0.13     0.00    0
                        max  range  skew kurtosis     se
Income               113734 112004  0.01    -0.85 441.10
Kidhome                   2      2  0.63    -0.79   0.01
Teenhome                  2      2  0.40    -0.99   0.01
Recency                  99     99  0.00    -1.20   0.62
MntWines               1493   1493  1.17     0.57   7.19
MntFruits               199    199  2.10     4.03   0.85
MntMeatProducts        1725   1725  1.82     3.23   4.64
MntFishProducts         259    259  1.91     3.04   1.17
MntSweetProducts        262    262  2.10     4.06   0.88
MntGoldProds            321    321  1.83     3.13   1.10
NumDealsPurchases        15     15  2.31     8.16   0.04
NumWebPurchases          27     27  1.20     4.08   0.06
NumCatalogPurchases      28     28  1.37     3.19   0.06
NumStorePurchases        13     13  0.71    -0.64   0.07
NumWebVisitsMonth        20     20  0.23     1.89   0.05
AcceptedCmp3              1      1  3.25     8.60   0.01
AcceptedCmp4              1      1  3.24     8.52   0.01
AcceptedCmp5              1      1  3.28     8.76   0.01
AcceptedCmp1              1      1  3.55    10.58   0.01
AcceptedCmp2              1      1  8.39    68.45   0.00
Complain                  1      1 10.35   105.16   0.00
Z_CostContact             3      0   NaN      NaN   0.00
Z_Revenue                11      0   NaN      NaN   0.00
Response                  1      1  1.95     1.80   0.01
Age                      80     56  0.09    -0.80   0.25
Customer_Days          2858    699 -0.02    -1.20   4.31
marital_Divorced          1      1  2.59     4.70   0.01
marital_Married           1      1  0.46    -1.79   0.01
marital_Single            1      1  1.38    -0.10   0.01
marital_Together          1      1  1.11    -0.77   0.01
marital_Widow             1      1  5.10    24.02   0.00
education_2n.Cycle        1      1  2.87     6.23   0.01
education_Basic           1      1  6.15    35.82   0.00
education_Graduation      1      1 -0.02    -2.00   0.01
education_Master          1      1  1.80     1.25   0.01
education_PhD             1      1  1.38    -0.09   0.01
MntTotal               2491   2487  0.91    -0.22  12.27
MntRegularProds        2458   2741  0.98    -0.06  11.79
AcceptedCmpOverall        4      4  2.72     7.94   0.01</code></pre>
</div>
</div>
</section>
<section id="describe-the-data-by-group" class="level3">
<h3 class="anchored" data-anchor-id="describe-the-data-by-group">Describe the Data by Group</h3>
<p>We may also be interested in describing the data based on a specific grouping factor. For example, let’s look at our summaries based on whether or not a customer has lodged a formal complaint.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">describeBy</span>(df, <span class="at">group =</span> <span class="st">"Complain"</span>) <span class="co"># describe our marketing data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Descriptive statistics by group 
Complain: 0
                     vars    n     mean       sd median  trimmed      mad  min
Income                  1 2185 51676.55 20719.18  51369 51687.17 24529.62 1730
Kidhome                 2 2185     0.44     0.54      0     0.40     0.00    0
Teenhome                3 2185     0.51     0.54      0     0.48     0.00    0
Recency                 4 2185    48.99    28.95     49    48.98    37.06    0
MntWines                5 2185   307.35   338.23    179   252.68   250.56    0
MntFruits               6 2185    26.42    39.80      8    17.13    11.86    0
MntMeatProducts         7 2185   165.75   218.21     68   119.91    88.96    0
MntFishProducts         8 2185    37.86    54.95     12    25.37    17.79    0
MntSweetProducts        9 2185    27.21    41.21      8    17.55    11.86    0
MntGoldProds           10 2185    44.21    51.81     25    33.74    28.17    0
NumDealsPurchases      11 2185     2.32     1.89      2     1.96     1.48    0
NumWebPurchases        12 2185     4.10     2.74      4     3.83     2.97    0
NumCatalogPurchases    13 2185     2.65     2.80      2     2.22     2.97    0
NumStorePurchases      14 2185     5.83     3.24      5     5.52     2.97    0
NumWebVisitsMonth      15 2185     5.33     2.41      6     5.41     2.97    0
AcceptedCmp3           16 2185     0.07     0.26      0     0.00     0.00    0
AcceptedCmp4           17 2185     0.08     0.26      0     0.00     0.00    0
AcceptedCmp5           18 2185     0.07     0.26      0     0.00     0.00    0
AcceptedCmp1           19 2185     0.06     0.25      0     0.00     0.00    0
AcceptedCmp2           20 2185     0.01     0.12      0     0.00     0.00    0
Complain               21 2185     0.00     0.00      0     0.00     0.00    0
Z_CostContact          22 2185     3.00     0.00      3     3.00     0.00    3
Z_Revenue              23 2185    11.00     0.00     11    11.00     0.00   11
Response               24 2185     0.15     0.36      0     0.06     0.00    0
Age                    25 2185    51.09    11.68     50    51.03    13.34   24
Customer_Days          26 2185  2512.02   202.56   2514  2512.30   257.97 2159
marital_Divorced       27 2185     0.10     0.31      0     0.01     0.00    0
marital_Married        28 2185     0.39     0.49      0     0.36     0.00    0
marital_Single         29 2185     0.22     0.41      0     0.14     0.00    0
marital_Together       30 2185     0.26     0.44      0     0.20     0.00    0
marital_Widow          31 2185     0.03     0.18      0     0.00     0.00    0
education_2n.Cycle     32 2185     0.09     0.29      0     0.00     0.00    0
education_Basic        33 2185     0.02     0.16      0     0.00     0.00    0
education_Graduation   34 2185     0.50     0.50      1     0.50     0.00    0
education_Master       35 2185     0.17     0.37      0     0.08     0.00    0
education_PhD          36 2185     0.22     0.41      0     0.15     0.00    0
MntTotal               37 2185   564.58   576.90    344   484.26   461.09    4
MntRegularProds        38 2185   520.37   554.76    288   438.58   400.30 -283
AcceptedCmpOverall     39 2185     0.30     0.68      0     0.14     0.00    0
                        max  range  skew kurtosis     se
Income               113734 112004  0.01    -0.85 443.25
Kidhome                   2      2  0.64    -0.79   0.01
Teenhome                  2      2  0.40    -1.00   0.01
Recency                  99     99  0.00    -1.20   0.62
MntWines               1493   1493  1.16     0.55   7.24
MntFruits               199    199  2.10     4.05   0.85
MntMeatProducts        1725   1725  1.81     3.22   4.67
MntFishProducts         259    259  1.91     3.03   1.18
MntSweetProducts        262    262  2.09     4.05   0.88
MntGoldProds            321    321  1.83     3.11   1.11
NumDealsPurchases        15     15  2.31     8.15   0.04
NumWebPurchases          27     27  1.20     4.13   0.06
NumCatalogPurchases      28     28  1.37     3.22   0.06
NumStorePurchases        13     13  0.70    -0.64   0.07
NumWebVisitsMonth        20     20  0.24     1.92   0.05
AcceptedCmp3              1      1  3.26     8.64   0.01
AcceptedCmp4              1      1  3.22     8.39   0.01
AcceptedCmp5              1      1  3.27     8.72   0.01
AcceptedCmp1              1      1  3.53    10.44   0.01
AcceptedCmp2              1      1  8.35    67.78   0.00
Complain                  0      0   NaN      NaN   0.00
Z_CostContact             3      0   NaN      NaN   0.00
Z_Revenue                11      0   NaN      NaN   0.00
Response                  1      1  1.95     1.79   0.01
Age                      80     56  0.09    -0.80   0.25
Customer_Days          2858    699 -0.01    -1.20   4.33
marital_Divorced          1      1  2.58     4.65   0.01
marital_Married           1      1  0.46    -1.79   0.01
marital_Single            1      1  1.38    -0.09   0.01
marital_Together          1      1  1.11    -0.77   0.01
marital_Widow             1      1  5.07    23.76   0.00
education_2n.Cycle        1      1  2.88     6.29   0.01
education_Basic           1      1  6.12    35.45   0.00
education_Graduation      1      1 -0.01    -2.00   0.01
education_Master          1      1  1.80     1.23   0.01
education_PhD             1      1  1.37    -0.12   0.01
MntTotal               2491   2487  0.91    -0.23  12.34
MntRegularProds        2458   2741  0.98    -0.07  11.87
AcceptedCmpOverall        4      4  2.71     7.91   0.01
------------------------------------------------------------ 
Complain: 1
                     vars  n     mean       sd  median  trimmed      mad   min
Income                  1 20 45672.40 19618.60 39341.0 44737.81 22307.94 15716
Kidhome                 2 20     0.65     0.59     1.0     0.62     0.00     0
Teenhome                3 20     0.55     0.60     0.5     0.50     0.74     0
Recency                 4 20    50.75    27.20    48.5    50.62    28.17     8
MntWines                5 20   176.70   211.11    34.0   147.88    48.18     1
MntFruits               6 20    25.10    39.13     6.0    16.31     8.90     0
MntMeatProducts         7 20   117.70   162.23    32.5    85.00    45.96     1
MntFishProducts         8 20    26.70    38.73     6.5    20.50     9.64     0
MntSweetProducts        9 20    18.20    31.36     4.5    11.19     5.93     0
MntGoldProds           10 20    27.60    40.93    13.5    18.00    12.60     2
NumDealsPurchases      11 20     2.40     1.43     2.0     2.19     1.48     1
NumWebPurchases        12 20     3.70     2.96     3.0     3.31     2.22     0
NumCatalogPurchases    13 20     2.10     2.90     0.5     1.56     0.74     0
NumStorePurchases      14 20     5.40     3.60     3.5     4.94     2.22     2
NumWebVisitsMonth      15 20     5.85     2.41     7.0     6.06     1.48     1
AcceptedCmp3           16 20     0.10     0.31     0.0     0.00     0.00     0
AcceptedCmp4           17 20     0.00     0.00     0.0     0.00     0.00     0
AcceptedCmp5           18 20     0.05     0.22     0.0     0.00     0.00     0
AcceptedCmp1           19 20     0.00     0.00     0.0     0.00     0.00     0
AcceptedCmp2           20 20     0.00     0.00     0.0     0.00     0.00     0
Complain               21 20     1.00     0.00     1.0     1.00     0.00     1
Z_CostContact          22 20     3.00     0.00     3.0     3.00     0.00     3
Z_Revenue              23 20    11.00     0.00    11.0    11.00     0.00    11
Response               24 20     0.15     0.37     0.0     0.06     0.00     0
Age                    25 20    51.65    15.04    50.0    51.81    17.79    25
Customer_Days          26 20  2588.70   193.28  2685.0  2602.06   164.57  2250
marital_Divorced       27 20     0.05     0.22     0.0     0.00     0.00     0
marital_Married        28 20     0.40     0.50     0.0     0.38     0.00     0
marital_Single         29 20     0.30     0.47     0.0     0.25     0.00     0
marital_Together       30 20     0.25     0.44     0.0     0.19     0.00     0
marital_Widow          31 20     0.00     0.00     0.0     0.00     0.00     0
education_2n.Cycle     32 20     0.15     0.37     0.0     0.06     0.00     0
education_Basic        33 20     0.00     0.00     0.0     0.00     0.00     0
education_Graduation   34 20     0.70     0.47     1.0     0.75     0.00     0
education_Master       35 20     0.10     0.31     0.0     0.00     0.00     0
education_PhD          36 20     0.05     0.22     0.0     0.00     0.00     0
MntTotal               37 20   364.40   424.05    77.5   300.19   101.56     9
MntRegularProds        38 20   336.80   414.50    63.5   271.94    84.51     0
AcceptedCmpOverall     39 20     0.15     0.49     0.0     0.00     0.00     0
                       max range  skew kurtosis      se
Income               83257 67541  0.35    -0.97 4386.85
Kidhome                  2     2  0.18    -0.93    0.13
Teenhome                 2     2  0.50    -0.87    0.14
Recency                 93    85  0.11    -1.28    6.08
MntWines               629   628  0.84    -0.88   47.21
MntFruits              137   137  1.58     1.39    8.75
MntMeatProducts        590   589  1.58     1.50   36.28
MntFishProducts        104   104  1.05    -0.69    8.66
MntSweetProducts       107   107  1.74     1.58    7.01
MntGoldProds           176   174  2.48     5.90    9.15
NumDealsPurchases        7     6  1.48     2.74    0.32
NumWebPurchases         11    11  1.01    -0.07    0.66
NumCatalogPurchases     10    10  1.25     0.52    0.65
NumStorePurchases       13    11  0.87    -0.81    0.81
NumWebVisitsMonth        9     8 -0.67    -1.02    0.54
AcceptedCmp3             1     1  2.47     4.32    0.07
AcceptedCmp4             0     0   NaN      NaN    0.00
AcceptedCmp5             1     1  3.82    13.29    0.05
AcceptedCmp1             0     0   NaN      NaN    0.00
AcceptedCmp2             0     0   NaN      NaN    0.00
Complain                 1     0   NaN      NaN    0.00
Z_CostContact            3     0   NaN      NaN    0.00
Z_Revenue               11     0   NaN      NaN    0.00
Response                 1     1  1.82     1.37    0.08
Age                     77    52 -0.02    -1.46    3.36
Customer_Days         2823   573 -0.49    -1.30   43.22
marital_Divorced         1     1  3.82    13.29    0.05
marital_Married          1     1  0.38    -1.95    0.11
marital_Single           1     1  0.81    -1.41    0.11
marital_Together         1     1  1.07    -0.89    0.10
marital_Widow            0     0   NaN      NaN    0.00
education_2n.Cycle       1     1  1.82     1.37    0.08
education_Basic          0     0   NaN      NaN    0.00
education_Graduation     1     1 -0.81    -1.41    0.11
education_Master         1     1  2.47     4.32    0.07
education_PhD            1     1  3.82    13.29    0.05
MntTotal              1298  1289  0.85    -0.73   94.82
MntRegularProds       1231  1231  0.90    -0.72   92.68
AcceptedCmpOverall       2     2  2.94     7.68    0.11</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>